{"ast":null,"code":"import _objectWithoutProperties from \"/Users/swyx/Work/netlify-identity-fauna-reddit-clone/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/swyx/Work/netlify-identity-fauna-reddit-clone/packages/app/src/App.js\";\nimport React, { useState } from 'react';\nimport { Router, Link } from '@reach/router';\nimport useFauna from './useFauna';\nimport useNetlifyIdentity from 'hooks/useNetlifyIdentity';\nimport { useInput } from 'hooks';\nimport { FaunaCtx, UserCtx } from 'contexts';\nimport { LoggedIn } from './components/LoggedIn';\nimport './App.css';\nimport './login.css';\n\nvar Home = function Home() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \"Home2\");\n};\n\nvar NotFound = function NotFound() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, \"Sorry, nothing here.\");\n};\n\nfunction Login() {\n  var _React$useContext = React.useContext(UserCtx),\n      user = _React$useContext.user,\n      doLogin = _React$useContext.doLogin,\n      doLogout = _React$useContext.doLogout;\n\n  var actionForm = React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    onClick: doLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, \"Login or Sign Up\"));\n  return React.createElement(\"div\", {\n    className: \"Login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, user ? React.createElement(\"a\", {\n    onClick: doLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, \"Logout\") : actionForm);\n}\n\nfunction List(props) {\n  var model = React.useContext(FaunaCtx);\n  var list = model.list();\n  console.log('showlist', list);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"List\"), React.createElement(\"div\", {\n    className: \"listNav\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, list.data.title), React.createElement(\"button\", {\n    onClick: function onClick() {\n      return alert('oops');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"back to all lists\")), React.createElement(\"pre\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, JSON.stringify(props, null, 2)));\n}\n\nfunction AllLists() {\n  var model = React.useContext(FaunaCtx);\n  var lists = model.lists;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"listNav\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Choose a list.\")), React.createElement(\"section\", {\n    className: \"main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"todo-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, lists.map(function (_ref) {\n    var data = _ref.data,\n        ref = _ref.ref;\n    console.log('list', data, ref);\n    return React.createElement(\"li\", {\n      key: ref.value.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/list/\".concat(ref.value.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, data.title)));\n  }))));\n}\n\nfunction InputArea() {\n  var _React$useContext2 = React.useContext(FaunaCtx),\n      addList = _React$useContext2.addList;\n\n  var _useInput = useInput(),\n      setValue = _useInput.setValue,\n      inputProps = _objectWithoutProperties(_useInput, [\"setValue\"]);\n\n  var handleNewTodoKeyDown = function handleNewTodoKeyDown(event) {\n    if (event.keyCode !== 13) return;\n    event.preventDefault();\n    var val = event.target.value.trim();\n\n    if (val) {\n      addList(val); // if (this.state.nowShowing === ALL_LISTS) {\n      //   modelRef.current.addList(val);\n      // } else {\n      //   modelRef.current.addTodo(val, modelRef.current.list());\n      // }\n\n      setValue('');\n    }\n  };\n\n  return React.createElement(\"input\", Object.assign({\n    className: \"new-todo\",\n    placeholder: \"Create a new list or choose from above.\",\n    onKeyDown: handleNewTodoKeyDown\n  }, inputProps, {\n    autoFocus: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }));\n}\n\nexport default function App(props) {\n  var fauna = useFauna();\n  var onAuthChange = fauna.onAuthChange;\n  var identity = useNetlifyIdentity(onAuthChange);\n  var user = identity.user,\n      doLogout = identity.doLogout,\n      doLogin = identity.doLogin,\n      authedFetch = identity.authedFetch;\n  return React.createElement(FaunaCtx.Provider, {\n    value: fauna,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(UserCtx.Provider, {\n    value: identity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"todos\")), React.createElement(Login, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), React.createElement(Router, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(AllLists, {\n    path: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    path: \"list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(List, {\n    path: \":listId\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }), React.createElement(List, {\n    path: \":listId/active\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), React.createElement(List, {\n    path: \":listId/completed\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  })), React.createElement(NotFound, {\n    default: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), React.createElement(InputArea, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  })), React.createElement(\"footer\", {\n    className: \"footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"footer\"))));\n}","map":{"version":3,"sources":["/Users/swyx/Work/netlify-identity-fauna-reddit-clone/packages/app/src/App.js"],"names":["React","useState","Router","Link","useFauna","useNetlifyIdentity","useInput","FaunaCtx","UserCtx","LoggedIn","Home","NotFound","Login","useContext","user","doLogin","doLogout","actionForm","List","props","model","list","console","log","data","title","alert","JSON","stringify","AllLists","lists","map","ref","value","id","InputArea","addList","setValue","inputProps","handleNewTodoKeyDown","event","keyCode","preventDefault","val","target","trim","App","fauna","onAuthChange","identity","authedFetch"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Router, Link } from '@reach/router';\nimport useFauna from './useFauna';\nimport useNetlifyIdentity from 'hooks/useNetlifyIdentity';\nimport { useInput } from 'hooks';\nimport { FaunaCtx, UserCtx } from 'contexts';\nimport { LoggedIn } from './components/LoggedIn';\nimport './App.css';\nimport './login.css';\n\nlet Home = () => <div>Home2</div>;\nconst NotFound = () => <div>Sorry, nothing here.</div>;\n\nfunction Login() {\n  const { user, doLogin, doLogout } = React.useContext(UserCtx);\n  var actionForm = (\n    <span>\n      <a onClick={doLogin}>Login or Sign Up</a>\n    </span>\n  );\n  return (\n    <div className=\"Login\">\n      {user ? <a onClick={doLogout}>Logout</a> : actionForm}\n    </div>\n  );\n}\n\nfunction List(props) {\n  const model = React.useContext(FaunaCtx);\n  const list = model.list();\n  console.log('showlist', list);\n  return (\n    <div>\n      <h3>List</h3>\n      <div className=\"listNav\">\n        <label>{list.data.title}</label>\n        <button onClick={() => alert('oops')}>back to all lists</button>\n      </div>\n      <pre>{JSON.stringify(props, null, 2)}</pre>\n    </div>\n  );\n}\nfunction AllLists() {\n  const model = React.useContext(FaunaCtx);\n  const { lists } = model;\n  return (\n    <div>\n      <div className=\"listNav\">\n        <label>Choose a list.</label>\n      </div>\n      <section className=\"main\">\n        <ul className=\"todo-list\">\n          {lists.map(({ data, ref }) => {\n            console.log('list', data, ref);\n            return (\n              <li key={ref.value.id}>\n                {/* <label onClick={() => alert('go')}>{data.title}</label> */}\n                <label>\n                  <Link to={`/list/${ref.value.id}`}>{data.title}</Link>\n                </label>\n              </li>\n            );\n          })}\n        </ul>\n      </section>\n    </div>\n  );\n}\n\nfunction InputArea() {\n  const { addList } = React.useContext(FaunaCtx);\n  const { setValue, ...inputProps } = useInput();\n  const handleNewTodoKeyDown = event => {\n    if (event.keyCode !== 13) return;\n    event.preventDefault();\n    var val = event.target.value.trim();\n    if (val) {\n      addList(val);\n      // if (this.state.nowShowing === ALL_LISTS) {\n      //   modelRef.current.addList(val);\n      // } else {\n      //   modelRef.current.addTodo(val, modelRef.current.list());\n      // }\n      setValue('');\n    }\n  };\n  return (\n    <input\n      className=\"new-todo\"\n      placeholder=\"Create a new list or choose from above.\"\n      onKeyDown={handleNewTodoKeyDown}\n      {...inputProps}\n      autoFocus={true}\n    />\n  );\n}\n\nexport default function App(props) {\n  const fauna = useFauna();\n  const { onAuthChange } = fauna;\n  const identity = useNetlifyIdentity(onAuthChange);\n  const { user, doLogout, doLogin, authedFetch } = identity;\n  return (\n    <FaunaCtx.Provider value={fauna}>\n      <UserCtx.Provider value={identity}>\n        <div>\n          <header className=\"header\">\n            <h1>\n              <Link to=\"/\">todos</Link>\n            </h1>\n            <Login />\n            <Router>\n              <AllLists path=\"/\" />\n              <div path=\"list\">\n                <List path=\":listId\" />\n                <List path=\":listId/active\" />\n                <List path=\":listId/completed\" />\n              </div>\n              <NotFound default />\n            </Router>\n            <InputArea />\n          </header>\n          <footer className=\"footer\">footer</footer>\n        </div>\n      </UserCtx.Provider>\n    </FaunaCtx.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}